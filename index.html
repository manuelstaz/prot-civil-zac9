<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patronato Zacualpan</title>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f0f4f8;
      color: #333;
    }
    header {
      background-color: #002147;
      color: white;
      padding: 2rem;
      text-align: center;
    }
    .portada {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
    }
    .frase {
      font-size: 1.5rem;
      font-weight: bold;
      animation: fade 3s infinite;
    }
    .color-amarillo { color: #f4c430; }
    .color-blanco   { color: #ffffff; }
    .color-verde    { color: #00cc66; }

    @keyframes fade {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    .botones {
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1rem;
      background-color: #003366;
      flex-wrap: wrap;
    }
    .botones button {
      background-color: #f4c430;
      border: none;
      padding: 1rem 2rem;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .fondo-voluntarios {
      background-image: url('https://github.com/manuelstaz/proteccion-civil-zacualpan/blob/main/regalo%20a%20voluntarios%20de%20pc.jpg?raw=true');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      width: 100%;
      height: 300px;
      position: relative;
    }

    .contenedor-voluntarios {
      position: absolute;
      top: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .agradecimiento-voluntarios {
      background: linear-gradient(to right, #002147, #f4c430);
      padding: 2rem;
      text-align: center;
      color: white;
    }

    .mensaje-voluntario {
      font-family: 'Raleway', sans-serif;
      font-size: 1.8rem;
      font-weight: bold;
      animation: entrarTexto 2s ease-in-out;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    @keyframes entrarTexto {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .seccion {
      display: none;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
    }
    .seccion h2 {
      color: #002147;
    }
    .activo {
      display: block;
    }

    #formLogin input, #formLogin select {
      display: block;
      margin: 1rem 0;
      padding: 0.5rem;
      width: 100%;
      max-width: 400px;
    }
    .error {
      color: red;
    }
    .ver-clave {
      margin-left: 0.5rem;
      cursor: pointer;
      color: #002147;
      font-size: 0.9rem;
    }
    .btn-subir {
      text-align: center;
      margin-top: 2rem;
    }
    .btn-subir button {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      background-color: #002147;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  .resaltado-animado {
  color: #f4c430;
  font-weight: bold;
  animation: parpadeo 1.5s infinite;
}

@keyframes parpadeo {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}
.logo-patronato {
  position: absolute;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  width: 180px;
  height: auto;
  z-index: 2;
  border-radius: 12px;
  box-shadow: 0 6px 12px rgba(0,0,0,0.4);
}
</style>
</head>
<body>
  <img class="portada" src="https://github.com/manuelstaz/proteccion-civil-zacualpan/blob/main/portada%20voluntarios%20de%20pc.jpeg?raw=true" alt="Portada Patronato Zacualpan">

  <header>
    <h1>Patronato Zacualpan Pro-equipamiento de Protecci√≥n Civil</h1>
    <div class="frase" id="fraseMotivadora"></div>
    <h1>Nuestra jurisdicci√≥n de voluntarios abarca desde Playa Platanitos hasta Las Varas Nayarit... ¬°GRACIAS!</h1>
  </header>

  <div class="botones">
    <button onclick="mostrarSeccion('quienes')">¬øQUI√âNES SOMOS?</button>
    <button onclick="mostrarLogin()">MESA DIRECTIVA</button>
    <button onclick="mostrarSeccion('donador')">HAZTE DONADOR DE UN PESO POR D√çA</button>
  </div>

  <div class="fondo-voluntarios">
  <img class="logo-patronato" src="https://github.com/manuelstaz/proteccion-civil-zacualpan/blob/main/patronato%20logo.JPG?raw=true" alt="Logotipo Patronato">
</div>
  </div>

  <section class="agradecimiento-voluntarios">
    <h2 class="mensaje-voluntario">
  Los voluntarios agradecen cada regalo <br>
  <span class="resaltado-animado">pero los que vienen de un ni√±o, <br>son semillas de esperanza y herencia de los padres</span><br>
  para un futuro unido y resiliente.
</h2>
  </section>

  <section id="quienes" class="seccion">
  <h2>¬øQui√©nes somos?</h2>
  <p>Somos un grupo de voluntarios que decidimos unirnos a la causa de Protecci√≥n Civil Zacualpan, porque estamos mirando la necesidad de este gran equipo que, desde hace m√°s de 20 a√±os, ha trabajado sin el equipo necesario para atender emergencias. Hemos sido testigos de c√≥mo se pierden vidas por la falta de herramientas, especialmente en accidentes automovil√≠sticos, donde no se cuenta con herramientas de extracci√≥n o rescate adecuadas.</p>

  <h2>Misi√≥n</h2>
  <p>Unirnos en este patronato con el fin de generar ideas y estrategias de recaudaci√≥n de fondos, comenzando con la colaboraci√≥n voluntaria de los miembros del patronato. Nuestra meta es cubrir al menos una cuota m√≠nima de un peso por d√≠a en promedio por persona, demostrando que con peque√±os esfuerzos se pueden lograr grandes cambios. Queremos impulsar el ejemplo, la constancia y la empat√≠a en la comunidad para apoyar a quienes nos cuidan y nos salvan.</p>

  <h2>Visi√≥n</h2>
  <p>Visualizamos un Zacualpan unido, solidario y resiliente ante la adversidad. Queremos formar un pueblo fuerte y preparado ante las emergencias, con un equipo de Protecci√≥n Civil completamente equipado y respaldado por su comunidad. Deseamos inspirar a las nuevas generaciones para continuar con esta labor solidaria como un legado de responsabilidad y amor al pr√≥jimo.</p>

  <h2>Valores</h2>
  <ul>
    <li>√âtica profesional</li>
    <li>Empat√≠a</li>
    <li>Diversidad</li>
    <li>Honestidad</li>
    <li>Responsabilidad</li>
    <li>Compromiso social</li>
    <li>Transparencia</li>
    <li>Gratitud</li>
  </ul>
  <div class="btn-subir">
      <button onclick="irAlInicio()">‚¨ÜÔ∏è IR A INICIO</button>
    </div>
  </section>

  <section id="loginMesa" class="seccion">
    <h2>Acceso Mesa Directiva</h2>
    <form id="formLogin" onsubmit="return validarLogin(event)">
      <label>Rol:</label>
      <select id="rol">
        <option value="presidente">Presidente</option>
        <option value="tesorera">Tesorera</option>
        <option value="secretario">Secretario</option>
        <option value="vocal1">Vocal 1</option>
        <option value="vocal2">Vocal 2</option>
      </select>
      <label>Contrase√±a:</label>
      <input type="password" id="clave" placeholder="Ingresa tu contrase√±a">
      <span class="ver-clave" onclick="toggleClave()">üëÅ Mostrar</span>
      <button type="submit">Ingresar</button>
      <p id="mensajeError" class="error"></p>
    </form>
    <div class="btn-subir">
      <button onclick="irAlInicio()">‚¨ÜÔ∏è IR A INICIO</button>
    </div>
  </section>

  <section id="mesa" class="seccion">
  <h2>Panel Privado de Mesa Directiva</h2>
  <p>Bienvenido. Aqu√≠ ver√°s los controles de ingresos, egresos y estado de donadores.</p>

  <div id="panelTesorera" style="display: none; margin-top: 2rem;">
    <button onclick="mostrarFormularioIngreso()">üì• Registrar Ingreso</button>
    <button onclick="mostrarFormularioEgreso()">üì§ Registrar Egreso</button>

    <div id="formIngreso" style="display: none; margin-top: 1rem;">
  <h3>Formulario de Ingreso</h3>
  <form id="formIngresoTesorera">
    <label>Nombre completo del donador:</label>
    <input type="text" id="nombreIngreso" required>
    <label>Tel√©fono:</label>
    <input type="tel" id="telefonoIngreso" required>
    <label>Poblaci√≥n:</label>
    <input type="text" id="poblacionIngreso" required>
    <label>Cantidad entregada ($):</label>
    <input type="number" id="cantidadIngreso" min="1" required>
    <button type="submit">Guardar y generar recibo</button>
    <p id="respuestaIngreso" style="color: green; font-weight: bold;"></p>
  </form>
</div>

    <div id="formEgreso" style="display: none; margin-top: 1rem;">
      <h3>Formulario de Egreso</h3>
      <p>Pr√≥ximamente funcionalidad completa...</p>
    </div>
  </div>

  <div class="btn-subir">
    <button onclick="mostrarSeccion('loginMesa')">‚Ü©Ô∏è Volver a inicio de Mesa Directiva</button>
  </div>
</section>

  <section id="donador" class="seccion">
  <h2>Hazte Donador</h2>
  <form id="formDonador">
    <label>Nombre completo:</label>
    <input type="text" id="nombre" required>
    <label>Tel√©fono:</label>
    <input type="tel" id="telefono" required>
    <label>Poblaci√≥n:</label>
    <input type="text" id="poblacion" required>
    <label>Cantidad entregada ($):</label>
    <input type="number" id="cantidad" min="1" required>
    <button type="submit">Registrar Donaci√≥n</button>
    <p id="respuestaDonador" style="color: green; font-weight: bold;"></p>
  </form>
  <div class="btn-subir">
    <button onclick="irAlInicio()">‚¨ÜÔ∏è IR A INICIO</button>
  </div>
</section>

  <script>
    const frases = [
      { texto: "Tu apoyo equipa a nuestros h√©roes voluntarios", color: "color-amarillo" },
      { texto: "Un pueblo unido es un pueblo fuerte", color: "color-blanco" },
      { texto: "Cada peso cuenta para salvar vidas", color: "color-verde" }
    ];
    let fraseIndex = 0;
    function actualizarFrase() {
      const fraseEl = document.getElementById('fraseMotivadora');
      fraseEl.textContent = frases[fraseIndex].texto;
      fraseEl.className = 'frase ' + frases[fraseIndex].color;
      fraseIndex = (fraseIndex + 1) % frases.length;
    }
    actualizarFrase();
    setInterval(actualizarFrase, 3000);

    function mostrarSeccion(id) {
      document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activo'));
      const seccion = document.getElementById(id);
      seccion.classList.add('activo');
      seccion.scrollIntoView({ behavior: 'smooth' });
    }

    function mostrarLogin() {
  document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activo'));
  const login = document.getElementById('loginMesa');
  if (login) {
    login.classList.add('activo');
    login.scrollIntoView({ behavior: 'smooth' });
  }
}

    const contrase√±as = {
      presidente: "zacualpan01",
      tesorera: "zacualpan02",
      secretario: "zacualpan03",
      vocal1: "zacualpan04",
      vocal2: "zacualpan05"
    };

    function validarLogin(event) {
      event.preventDefault();
      const rol = document.getElementById("rol").value;
      const clave = document.getElementById("clave").value;
      const mensaje = document.getElementById("mensajeError");

      if (contrase√±as[rol] === clave) {
        mensaje.textContent = "";
        mostrarSeccion("mesa");
        if (rol === "tesorera") {
          document.getElementById("panelTesorera").style.display = "block";
        } else {
          document.getElementById("panelTesorera").style.display = "none";
        }
      } else {
        mensaje.textContent = "‚ùå Contrase√±a incorrecta.";
      }
    }

    function toggleClave() {
      const input = document.getElementById("clave");
      input.type = input.type === "password" ? "text" : "password";
    }

    function irAlInicio() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.addEventListener('click', function(e) {
      const activo = document.querySelector('.seccion.activo');
      if (activo && !activo.contains(e.target) && !e.target.closest('.botones')) {
        activo.classList.remove('activo');
      }
    });
  const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbwGaVAEUqiMsHSzgwd54kKE6HQRaw-QuQDmSnJvOEIyOmc-T1AtAXoCFISHGQVchdIh/exec";

document.getElementById("formDonador").addEventListener("submit", async function(e) {
  e.preventDefault();

  const nombre = document.getElementById("nombre").value.trim();
  const telefono = document.getElementById("telefono").value.trim();
  const poblacion = document.getElementById("poblacion").value.trim();
  const cantidad = parseFloat(document.getElementById("cantidad").value.trim());

  const respuesta = document.getElementById("respuestaDonador");

  try {
    const res = await fetch(URL_SCRIPT, {
      method: "POST",
      body: JSON.stringify({ nombre, telefono, poblacion, cantidad }),
      headers: { "Content-Type": "application/json" }
    });

    const data = await res.json();

    if (data.exito) {
      respuesta.textContent = `‚úÖ Donaci√≥n registrada con √©xito. Folio: ${data.folio}`;
      document.getElementById("formDonador").reset();
    } else {
      respuesta.textContent = "‚ùå Error al registrar. Intenta de nuevo.";
    }
  } catch (error) {
    console.error("Error:", error);
    respuesta.textContent = "‚ùå No se pudo conectar con el servidor.";
  }
});
function mostrarFormularioIngreso() {
  document.getElementById("formIngreso").style.display = "block";
  document.getElementById("formEgreso").style.display = "none";
}

function mostrarFormularioEgreso() {
  document.getElementById("formIngreso").style.display = "none";
  document.getElementById("formEgreso").style.display = "block";
}

document.getElementById("formIngresoTesorera").addEventListener("submit", async function(e) {
  e.preventDefault();

  const nombre = document.getElementById("nombreIngreso").value.trim();
  const telefono = document.getElementById("telefonoIngreso").value.trim();
  const poblacion = document.getElementById("poblacionIngreso").value.trim();
  const cantidad = parseFloat(document.getElementById("cantidadIngreso").value.trim());

  const respuesta = document.getElementById("respuestaIngreso");

  try {
    const res = await fetch(URL_SCRIPT, {
      method: "POST",
      body: JSON.stringify({ nombre, telefono, poblacion, cantidad }),
      headers: { "Content-Type": "application/json" }
    });

    const data = await res.json();

    if (data.exito) {
      respuesta.textContent = `‚úÖ Ingreso registrado. Generando recibo...`;
      generarReciboPDF(nombre, telefono, poblacion, cantidad, data.folio);
      document.getElementById("formIngresoTesorera").reset();
    } else {
      respuesta.textContent = "‚ùå Error al registrar el ingreso.";
    }
  } catch (error) {
    console.error("Error:", error);
    respuesta.textContent = "‚ùå No se pudo conectar con el servidor.";
  }
});

function generarReciboPDF(nombre, telefono, poblacion, cantidad, folio) {
  const doc = new jsPDF();
  const fecha = new Date().toLocaleString("es-MX");
  const logo = "https://github.com/manuelstaz/proteccion-civil-zacualpan/blob/main/patronato%20logo.JPG?raw=true";

  doc.addImage(logo, 'JPEG', 150, 10, 40, 30);
  doc.setFontSize(16);
  doc.text("PATRONATO ZACUALPAN PRO-EQUIPAMIENTO", 20, 20);
  doc.text("DE PROTECCI√ìN CIVIL", 20, 30);

  doc.setFontSize(12);
  doc.text(`Folio: ${folio}`, 20, 45);
  doc.text(`Fecha: ${fecha}`, 20, 52);
  doc.text(`Donador: ${nombre}`, 20, 65);
  doc.text(`Tel√©fono: ${telefono}`, 20, 72);
  doc.text(`Poblaci√≥n: ${poblacion}`, 20, 79);
  doc.text(`Cantidad: $${cantidad.toFixed(2)} MXN`, 20, 86);

  doc.setFontSize(11);
  doc.text("¬°Gracias por apoyar a nuestros h√©roes voluntarios!", 20, 105);

  doc.save(`recibo_${folio}.pdf`);
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
